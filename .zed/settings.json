{
  "lsp": {
    "rust-analyzer": {
      "initialization_options": {
        "cargo": {
          "buildScripts": {
            "overrideCommand": [
              "cargo",
              "remote",
              "--build-env",
              "SKIP_WASM_BUILD=1",
              "--",
              "check",
              "--message-format=json",
              "--all-targets",
              "--all-features",
              "--target-dir=target/rust-analyzer"
            ]
          }
        },
        "check": {
          "overrideCommand": [
            "cargo",
            "remote",
            "--build-env",
            "SKIP_WASM_BUILD=1",
            "--",
            "check",
            "--workspace",
            "--message-format=json",
            "--all-targets",
            "--all-features",
            "--target-dir=target/rust-analyzer"
          ]
        },
        // specific proc-macro handling
        "procMacro": {
          "enable": true,
          "server": "cargo remote -- check"
        }
      }
    }
  }
}
